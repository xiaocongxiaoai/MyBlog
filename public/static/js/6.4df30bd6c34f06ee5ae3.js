webpackJsonp([6],{"9nSv":function(t,e){},JUoO:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"blogInfo",components:{loading:s("qqiS").a},data:function(){return{loginSate:!1,api_token:"",blogId:"",title:"",content:"",Bloguser_id:"",blogTag:[],blog:{},systemBlogType:[],systemBlogTypeName:"",isActive:!1,comment:"",commentList:[]}},mounted:function(){this.blogId=this.$route.query.blogId,window.sessionStorage.getItem("apiToken")?this.api_token=window.sessionStorage.getItem("apiToken"):this.$router.push("login"),window.sessionStorage.getItem("systemBlogType")&&(this.systemBlogType=JSON.parse(window.sessionStorage.getItem("systemBlogType"))),this.reflushBlog()},methods:{goBack:function(){window.history.length>1?this.$router.go(-1):this.$router.push("/")},sendComment:function(){var t=this,e={api_token:this.api_token,blogOnlyId:this.blogId,comment:this.comment};this.$API.addComment(e).then(function(e){t.reflushBlog()}).catch(function(t){})},delComment:function(t,e){var s=this,a={commentOnlyId:t,blogOnlyId:this.blogId,api_token:this.api_token,user_id:this.Bloguser_id};console.log(a),this.$API.delComment(a).then(function(t){s.reflushBlog()}).catch(function(t){})},reflushBlog:function(){var t=this;this.$API.getBlogInfo({blogId:this.blogId,api_token:this.api_token}).then(function(e){t.title=e.data.data1.blogTitle,t.content=e.data.data1.blogContent,t.blog=e.data.data1,t.commentList=e.data.data2,t.systemBlogType.forEach(function(e){e.blogTypeOnlyId==t.blog.blogTypeId&&(t.systemBlogTypeName=e.name)}),t.blogTag=t.blog.blogTag.split(";"),t.Bloguser_id=e.data.data1.user_id}).catch(function(t){})},handleThumb:function(t){var e=this,s={api_token:this.api_token,commentOnlyId:t.commentOnlyId,IsLike:1};this.$API.LikeOnLike(s).then(function(t){console.log(t),0==t.data.msg_code&&e.reflushBlog()}).catch(function(t){})}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrapper"},[s("loading"),t._v(" "),s("el-scrollbar",{staticStyle:{height:"100%"}},[s("div",{staticClass:"top"},[s("div",[s("div",{staticStyle:{width:"200px",float:"left"}},[s("el-page-header",{staticClass:"returnBtn",on:{back:t.goBack}}),t._v(" "),s("span",[t._v("博客详情")])],1)])]),t._v(" "),s("div",{staticClass:"blogBox"},[s("div",{staticClass:"blog"},[s("div",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),s("div",{staticClass:"content",domProps:{innerHTML:t._s(t.content)}})]),t._v(" "),s("div",{staticClass:"blogInfo"},[s("div",{staticClass:"userImage"},[s("router-link",{attrs:{to:{name:"userMainPage",query:{userOnlyId:t.Bloguser_id}}}},[s("el-avatar",{staticClass:"image",attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}})],1),t._v("\n          "+t._s(this.blog.name)+"\n        ")],1),t._v(" "),s("div",{staticClass:"date"},[s("i",{staticClass:"el-icon-date"}),t._v("\n          "+t._s(t.blog.created_at)+"\n        ")]),t._v(" "),s("div",[t._v("博客系统分类: "+t._s(t.systemBlogTypeName))]),t._v(" "),s("div",[t._v("博客标签:\n          ")])])]),t._v(" "),s("div",{staticClass:"commentBox"},[s("div",{staticClass:"comment",staticStyle:{position:"relative"}},[s("el-input",{staticStyle:{display:"inline-block",width:"80%"},attrs:{type:"textarea",placeholder:"想对作者说什么",maxlength:"100","show-word-limit":""},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),t._v(" "),s("el-button",{staticStyle:{height:"40px",position:"absolute",top:"50%","margin-top":"-20px"},on:{click:t.sendComment}},[t._v("发送")])],1),t._v(" "),s("div",{staticClass:"commentList"},[s("ul",t._l(t.commentList,function(e){return s("li",{key:e.id},[s("div",{staticClass:"header"},[s("span",{staticClass:"headerImage"},[s("i",{staticClass:"el-icon-s-custom"})]),t._v(" "),s("span",{staticClass:"name",attrs:{title:e.name}},[t._v(" "+t._s(e.name))])]),t._v(" "),s("div",{staticClass:"body"},[s("div",{staticClass:"word"},[t._v("\n                "+t._s(e.content)+"\n              ")]),t._v(" "),s("div",{staticClass:"other"},[s("div",{staticClass:"left"},[s("span",{staticClass:"time"},[t._v(t._s(e.created_at))])]),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"like"},[s("span",{class:{isActive:e.IsLiked,thumb:!0},on:{click:function(s){return t.handleThumb(e)}}},[s("i",{staticClass:"fa fa-thumbs-o-up",attrs:{"aria-hidden":"true"}})]),t._v(" "),s("span",[t._v("\n                      "+t._s(e.likeNum)+"\n                    ")])]),t._v(" "),s("i",{staticClass:"el-icon-close delComment",on:{click:function(s){return t.delComment(e.commentOnlyId)}}})])])])])}),0)])]),t._v(" "),[s("el-backtop",{attrs:{target:".el-scrollbar .el-scrollbar__wrap"}})]],2)],1)},staticRenderFns:[]};var n=s("VU/8")(a,i,!1,function(t){s("9nSv")},"data-v-c0aa960a",null);e.default=n.exports}});
//# sourceMappingURL=6.4df30bd6c34f06ee5ae3.js.map