webpackJsonp([5],{fFQC:function(t,o){},fbPZ:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var l=e("bOdI"),i=e.n(l),a=(e("NYxO"),e("XSTL")),n=e("qqiS"),s=e("YTGk"),g={data:function(){return{blogTagOptions:"",blogTagArray:this.initData.split(";")}},props:["initData"],mounted:function(){var t=this,o=JSON.parse(window.localStorage.getItem("BlogTag"));if(o)this.blogTagOptions=o;else{var e="";window.sessionStorage.getItem("apiToken")?e=window.sessionStorage.getItem("apiToken"):this.$router.push("login"),this.$API.getBlogTag({api_token:e}).then(function(o){t.blogTagOptions=o.data.data}).catch(function(t){console.log(t)})}},methods:{selectTag:function(t){this.$emit("select",t)}}},r={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择或输入标签"},on:{change:t.selectTag},model:{value:t.blogTagArray,callback:function(o){t.blogTagArray=o},expression:"blogTagArray"}},t._l(t.blogTagOptions,function(t){return e("el-option",{key:t.content,attrs:{label:t.content,value:t.content}})}),1)],1)},staticRenderFns:[]},c=e("VU/8")(g,r,!1,null,null,null).exports,d={components:{loading1:n.a,systemBlogType:s.a,blogTagCom:c},mounted:function(){window.sessionStorage.getItem("apiToken")?this.blogForm.api_token=window.sessionStorage.getItem("apiToken"):this.$router.push("login")},props:["show","modeOprate","blogId","blogContent","blogType","blogUserType","blogTag","isPublic","title"],data:function(){return{showDialog:this.show,blogForm:{title:this.title,blogType:this.blogType,blogContent:this.blogContent,blogUserType:this.blogUserType,blogTag:this.blogTag,isPublic:this.isPublic,api_token:this.api_token,blogId:this.blogId},blogTagArray:[],systemBlogType:[],blogUserTypeArray:[],blogTagOptions:[]}},watch:{show:function(t,o){this.showDialog=t},blogContent:function(t,o){this.blogForm.blogContent=t},blogId:function(t,o){this.blogForm.blogId=t},blogType:function(t,o){this.blogForm.blogType=t},blogUserType:function(t,o){this.blogForm.blogUserType=t},blogTag:function(t,o){this.blogForm.blogTag=t},isPublic:function(t,o){this.blogForm.isPublic=t},title:function(t,o){this.blogForm.title=t}},methods:{saveOk:function(){var t=this;console.log(this.blogForm,"上传的值"),""!=this.blogForm.title.trim()?"UPDATE"==this.modeOprate?this.$API.changeBlog(this.blogForm).then(function(o){0==o.data.msg_code&&t.close()}).catch(function(t){console.log(t)}):this.$API.save(this.blogForm).then(function(o){t.blogForm.blogTag=[],1==o.data.msg_code?t.$message.error(o.data.msg[0]):(t.$message.success("保存成功"),t.close())}).catch(function(t){console.log(t)}):this.$message.error("没输入博客标题")},selectSystemBlogType:function(t){this.blogForm.blogType=t},selectBlogTag:function(t){console.log(t),this.blogForm.blogTag=t.join(";")},close:function(){this.$emit("update:show",!1)}}},p={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"dialog",staticStyle:{position:"relative"}},[e("el-dialog",{attrs:{title:"保存博客",visible:t.showDialog,"show-close":!1}},[e("loading1"),t._v(" "),e("el-form",{ref:"from",attrs:{model:t.blogForm,"label-width":"150px"}},[e("el-form-item",{attrs:{label:"标题"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.blogForm.title,callback:function(o){t.$set(t.blogForm,"title",o)},expression:"blogForm.title"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"系统类别"}},[e("div",{staticStyle:{width:"100%"}},[e("systemBlogType",{attrs:{initData:t.blogForm.blogType},on:{select:t.selectSystemBlogType}})],1)]),t._v(" "),e("el-form-item",{attrs:{label:"用户自定义类别"}},[e("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.blogForm.blogUserType,callback:function(o){t.$set(t.blogForm,"blogUserType",o)},expression:"blogForm.blogUserType"}},t._l(t.blogUserTypeArray,function(t){return e("el-option",{key:t.blogTypeOnlyId,attrs:{label:t.name,value:t.blogTypeOnlyId}})}),1)],1),t._v(" "),e("el-form-item",{attrs:{label:"标签"}},[e("blogTagCom",{attrs:{initData:t.blogForm.blogTag},on:{select:t.selectBlogTag}})],1),t._v(" "),e("el-form-item",{attrs:{label:"是否公开"}},[e("el-checkbox",{model:{value:t.blogForm.isPublic,callback:function(o){t.$set(t.blogForm,"isPublic",o)},expression:"blogForm.isPublic"}})],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(o){return t.close()}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(o){return t.saveOk()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var b=e("VU/8")(d,p,!1,function(t){e("vKkq")},"data-v-250ea966",null).exports,u=[["bold","italic","underline","strike"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["link","image"],["clean"]],m={components:{pageTop:a.a,loading:n.a,saveBox:b},mounted:function(){window.sessionStorage.getItem("apiToken")&&(this.api_token=window.sessionStorage.getItem("apiToken")),this.getBlogList(),this.$route.query.hasOwnProperty("blogId")&&this.getBlog(this.$route.query.blogId)},data:function(){var t;return t={content:"",openLeftBox:!0,loginSate:!1,api_token:"",saveBlogDialog:!1,pageLink:[{index:1,date:"2019 - 1 - 3",page:[{index:1,name:"如何实现浏览器跨域，php"},{index:2,name:"如何实现浏览器跨域，php"}]},{index:2,date:"2019 - 9 - 3",page:[{index:1,name:"我是第二条测试数据，我测试文本长度过长会如何处理，我在加长，加长"},{index:2,name:"如何实现浏览器跨域，php"}]},{index:3,date:"2019 - 9 - 3",page:[{index:1,name:"我是第二条测试数据，我测试文本长度过长会如何处理，我在加长，加长"},{index:2,name:"如何实现浏览器跨域，php"}]},{index:4,date:"2019 - 9 - 3",page:[{index:1,name:"我是第二条测试数据，我测试文本长度过长会如何处理，我在加长，加长"},{index:2,name:"如何实现浏览器跨域，php"}]},{index:5,date:"2019 - 9 - 3",page:[{index:1,name:"我是第二条测试数据，我测试文本长度过长会如何处理，我在加长，加长"},{index:2,name:"如何实现浏览器跨域，php"}]},{index:6,date:"2019 - 9 - 3",page:[{index:1,name:"我是第二条测试数据，我测试文本长度过长会如何处理，我在加长，加长"},{index:2,name:"如何实现浏览器跨域，php"}]}],blogTag:[],fileList:[],myBlogList:[],options:{placeholder:"请输入......",readOnly:!1,theme:"snow",modules:{toolbar:{container:u,handlers:{image:function(t){t?(console.log(t),document.querySelector(".upload input").click()):this.quill.format("image",!1)}}}}},blogId:"",mode:"ADD",blogContent:"",title:"",blogType:""},i()(t,"blogContent",""),i()(t,"blogUserType",""),i()(t,"blogTagArray",[]),i()(t,"isPublic",!0),i()(t,"api_token",""),t},methods:{onEditorChange:function(t){var o=t.editor,e=t.html,l=t.text;console.log(o,e,l)},beforeUpload:function(t){},upload:function(t){var o=this,e=t.file,l=new FormData;l.append("file",e),this.$API.uploadImage(l,this.api_token).then(function(t){0==t.data.msg_code?(console.log(t.data.path),o.blogContent+='<img src= "http://'+t.data.path+"\"  alt='' >"):(o.$message.error(t.data.msg),o.blogContent+="<el-image></el-image>")}).catch(function(t){console.log(t)})},save:function(){""!=this.blogContent.trim()?this.saveBlogDialog=!0:this.$message.error("您没有输入内容")},add:function(){this.blogContent=""},getBlogList:function(){var t=this;this.$API.getMyBlogList({index:1,pagecount:10,blogtypeId:"",type:1,isGood:0,api_token:this.api_token}).then(function(o){t.myBlogList=o.data.data}).catch(function(t){console.log(t)})},getBlog:function(t){var o=this;console.log(t),this.$API.getBlogInfo({api_token:this.api_token,blogId:t}).then(function(t){console.log(t),o.blogContent=t.data.data1.blogContent,o.title=t.data.data1.blogTitle,o.blogType=t.data.data1.blogTypeId,o.blogUserType=t.data.data1.blogUserTypeId,o.blogTag=t.data.data1.blogTag.split(";"),o.blogTagArray=t.data.data1.blogTag,o.mode="UPDATE",o.blogId=t.data.data1.blogOnlyId,o.blogContent=t.data.data1.blogContent}).catch(function(t){console.log(t)})},load:function(){},goBack:function(){window.history.length>1?this.$router.go(-1):this.$router.push("/")}}},h={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"wrapper"},[e("div",[e("pageTop",{attrs:{title:"写博",loginSate:t.loginSate}}),t._v(" "),e("div",{staticClass:"saveBtn",staticStyle:{position:"absolute",top:"20px",right:"100px"},on:{click:t.add}},[t._v("新建\n      "),e("i",{staticClass:"el-icon-plus"})]),t._v(" "),e("div",{staticClass:"saveBtn",staticStyle:{position:"absolute",top:"20px",right:"20px"},on:{click:t.save}},[t._v("保存\n      "),e("i",{staticClass:"el-icon-finished"})])],1),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"arrow ",on:{click:function(o){t.openLeftBox=!t.openLeftBox}}},[e("i",{class:[{"el-icon-arrow-left":t.openLeftBox},{"el-icon-arrow-right":!t.openLeftBox}]})]),t._v(" "),t.openLeftBox?e("div",{staticClass:"leftStatue"},[e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],staticClass:"itemBox infinite-list",staticStyle:{overflow:"auto"}},[e("ul",{staticClass:"pageUl"},t._l(t.myBlogList,function(o){return e("li",{key:o.id,staticClass:"pageLi"},[e("i",{staticClass:"el-icon-date"},[t._v(t._s(o.updated_at))]),t._v(" "),e("div",{staticClass:"pageItem",on:{click:function(e){return t.getBlog(o.blogOnlyId)}}},[t._v(" "+t._s(o.blogTitle))])])}),0)])]):t._e(),t._v(" "),e("div",{staticClass:"textEditor",class:{textEditFull:!t.openLeftBox}},[e("loading"),t._v(" "),e("quill-editor",{ref:"myTextEditor",staticClass:"editor",attrs:{options:t.options},on:{change:function(o){return t.onEditorChange(o)}},model:{value:t.blogContent,callback:function(o){t.blogContent=o},expression:"blogContent"}})],1)]),t._v(" "),t.saveBlogDialog?e("save-box",{attrs:{show:t.saveBlogDialog,modeOprate:t.mode,blogId:t.blogId,blogContent:t.blogContent,blogType:t.blogType,blogUserType:t.blogUserType,blogTag:t.blogTagArray,isPublic:t.isPublic,title:t.title},on:{"update:show":function(o){t.saveBlogDialog=o}}}):t._e(),t._v(" "),e("div",{staticStyle:{display:"none"}},[e("el-upload",{staticClass:"upload",attrs:{action:"","http-request":t.upload,multiple:"","before-upload":t.beforeUpload,"file-list":t.fileList}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1)},staticRenderFns:[]};var f=e("VU/8")(m,h,!1,function(t){e("fFQC")},"data-v-fc1a74a4",null);o.default=f.exports},vKkq:function(t,o){}});
//# sourceMappingURL=5.dcb921583d9e6e6ebe40.js.map